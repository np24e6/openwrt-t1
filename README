# Firmware Building And Installation

## Prerequisites

	Make sure you're running a supported Linux distribution.
	We recommend using Ubuntu 20.04 LTS (http://www.ubuntu.com/download/desktop).
	You might succeed with other distributions.

	It is recommended to use Docker environment to build RUTOS firmware which
	is accessible from "RUTX_R_GPL_00.07.04.4/scripts/dockerbuild".

## Building with Docker environment

	1. Install Docker (https://docs.docker.com/engine/install/ubuntu).

	2. Extract the GPL archive to an empty folder

		$ mkdir RUTX_R_GPL_00.07.04.4
		$ tar -xzf ~/Downloads/RUTX_R_GPL_00.07.04.4.tar.gz -C RUTX_R_GPL_00.07.04.4

	3. Update feeds

		$ cd RUTX_R_GPL_00.07.04.4
		$ ./scripts/dockerbuild ./scripts/feeds update -a

	4. Build the image

		$ ./scripts/dockerbuild make

## Building with Host OS

	1. Install NodeJS v12 (or newer) and NPM v6.9 (or newer).

		Please follow NodeJS and NPM installation guides for your distribution.

	2. Install required packages

		$ sudo apt update
		$ sudo apt install build-essential ccache ecj fastjar file flex g++ gawk \
			gettext git java-propose-classpath java-wrappers jq libelf-dev \
			libffi-dev libncurses5-dev libncursesw5-dev libssl-dev libtool \
			python python2.7-dev python3 python3-dev python3-distutils \
			python3-setuptools rsync subversion swig time u-boot-tools \
			unzip wget xsltproc zlib1g-dev bison

	3. Extract the GPL archive to an empty folder

		$ mkdir RUTX_R_GPL_00.07.04.4
		$ tar -xzf ~/Downloads/RUTX_R_GPL_00.07.04.4.tar.gz -C RUTX_R_GPL_00.07.04.4

	4. Update feeds

		$ cd RUTX_R_GPL_00.07.04.4
		$ ./scripts/feeds update -a

	5. Build the image

		$ make

## Installation

	After successful build you will get the firmware file in
		"RUTX_R_GPL_00.07.04.4/bin/targets/ipq40xx/generic/tltFws".

	Update the new firmware via the web interface on your device.
